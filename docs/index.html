---
layout: default
title: <span style="color:#ff4500">Interaction Graph-based Reddit Community Recommendation </span>
---
<!-- <style>
.heading1 {
    color: green;
    font-weight:700;
    font-size: 35px;
}
</style> -->

<head>
    <link rel="stylesheet" href="./css/styles.css" />
</head>

<div class = "main">
    <span style="color:black">r/DSC180 &#x2022;</span> <span style="color:gray">Made by: u/Pravar_Bhandari, u/Scott_Sutherland, u/Felicia_Chan, u/Ryan_Don</span><br>
    <span style="color:black;font-size:1.5em"> I want to create a Subreddit Recommendation System</span><br>
    <span style="color:black;"> As the title says, I want to create a Reddit Community Recommendation System. I know that this obviously already exists, but I want
    to try recommending subreddits to users by using user interactions as embeddings in my recommender system. Furthermore, I want this to be a graph-based
    recommender system. How would I go about creating something like this?
    </span><br>
    <span style="color:black">Suggested: </span> <span style="color:blue">r/TigerGraph</span>
</div>
<div class = "main" style = "margin-bottom: 10 px">
    <h2 class="heading" style="margin-top:5px"> Introduction </h2>
        <div class = "blank"><div class = "b">
            &nbsp&nbsp&nbsp&nbsp Social media has become the most important way for people to access information, connect with friends, and expand businesses.
            Around 70 percent of all Americans use social media to connect with each other and share information.
            The social media platform Reddit is a massive collection of forums where people can share news and content.
            Reddit is made up of more than a million communities known as subreddits; each subreddit consists of a different topic.
            Users in these subreddits can make posts and comments to interact with other users, essentially forming communities with specific interests.
            As of 2022, Reddit has 50 million daily active Reddit users worldwide. Reddit users are often recommended subreddits based
            on those they have visited or interacted with. Like many other social media platforms, Reddit's
            comment representation is a tree structure where separate replies to a comment are branches. We can think of conversation in one of these trees
            as a comment chain, that is, a set of comments where each one (apart from the first comment) is a reply to one preceding it.
            We will investigate the typical size, shape and diversity of users in each of these chains.<br><br>
            
            &nbsp&nbsp&nbsp&nbsp From a business point of view, the impact of this task would be in user acquisition and user retention. For current users, this would
            help expose them to subreddits they may be interested in, decreasing the likelihood of churn. For newer users without a few established
            subreddit communities they are a part of, immediately exposing them to similar communities may be beneficial in making them recurring
            users rather than one-time users. From a graph perspective, this problem is worth investigating as it can evaluate the relevancy of user
            interactions in a graph-like comment interaction structure as a basis for recommendation systems. We use a graph-based machine learning
            algorithm that assists in recommending subreddits to users based upon their interactions with other users in subreddits through comment chains.<br><br>
            
            &nbsp&nbsp&nbsp&nbsp Previous work has been done in the space of subreddit recommendation. In one attempt, a subreddit-to-subreddit interest network was built, where two
            subreddits are connected if a large portion of one subreddit's members are also active in the other. The model they use is K-means clustering, with
            another choosing to use the K-Nearest Neighbors algorithm. These examples along with others are not necessarily graph-based. Where graph community
            detection tasks of subreddits are used, the graphs are represented in relatively simple ways, primarily incorporating user and subreddit subscription
            relationships and using that data to make recommendations using "non-graphy" criteria such as similarity scores like Jaccard. By contrast, we look to
            use additional information which can be represented as graphs such as interactions between different users within subreddits in an attempt to leverage
            that interaction information as an indicator of userâ€™s affinity for different communities/subreddits. We aim to use collaborative filtering encoded
            within our algorithm with user interactions to then accurately recommend subreddits to users.<br><br>
            
            &nbsp&nbsp&nbsp&nbsp In order to create an algorithm ourselves, we use a dataset provided and maintained by Jason Baumgartner which can be downloaded via their website
            <a href="https://pushshift.io/">pushshift.io</a> at its <a href="https://files.pushshift.io/reddit/">data directory subdomain</a>. There, data for Reddit
            users, subreddits, posts and comments among other things are hosted in monthly time increments going back to Reddit's inception in 2005. In order to ensure
            we didn't face any hardware limitations, we opted to use all comments prior to 2011 (2005 - Dec. 2010). However, because the data across all time periods
            is formatted in the same way, our work could easily be scaled up simply by downloading and using the more recent files. From it, we build a graph with 2
            different types of nodes and 2 types of edges. Our 2 nodes are: User nodes and Subreddit nodes. Our first edge, interacted_with, connects
            users who interacted with other users. Second, the commented_in edge connects users to subreddits that they have interacted in via comments.<br><br>
            
            <table>
                <tr>
                    <td>Dataset Name</td>
                    <td>Contents</td>
                </tr>
                <tr>
                    <td>Users-Users</td>
                    <td>Connects users who interacted with one another</td>
                </tr>
                <tr>
                    <td>Subreddits</td>
                    <td>All Subreddits in the dataset</td>
                </tr>
                <tr>
                    <td>Subreddits-Comments</td>
                    <td>All comments and the subreddit they were made in</td>
                </tr>
                <tr>
                    <td>Users</td>
                    <td>All users in the dataset</td>
                </tr>
                <tr>
                    <td>Users-Comments</td>
                    <td>Comments and users who made the comments</td>
                </tr>
                <tr>
                    <td>Comments</td>
                    <td>All comments in the dataset</td>
                </tr>
                <tr>
                    <td>Comments-Comments</td>
                    <td>Comments that are connected in a comment chain</td>
                </tr>
            </table><br>
            
            &nbsp&nbsp&nbsp&nbsp All of the edges in this dataset are undirected, meaning that the relationship between any edge (v<sub>i</sub>, v<sub>j</sub>)
            in the graph is mutual. In total, our graph contains ~172,000 total vertices and ~1,200,000 edges. In a bit more detail, the graph contains 2,929
            unique subreddit vertices, and ~170,000 user vertices along with ~865,000 "interacted_with" edges and ~345,000 "commented_in" edges.<br><br>

            &nbsp&nbsp&nbsp&nbsp In particular, this dataset allows us to make this evaluation on a network like the one that can be derived from Reddit. That is, one which encodes
            information about the interaction of users with other users within pre-defined communities. However, as many social media platforms use very similar
            representations for the links between users, this data can hopefully allow us to make more broad claims about social graphs and their usefulness in making
            predictions about users preferred communities.<br>
            
            
            <div><img src="./images/up_arrow-removebg-preview.png" style="width:30px;height:30px;position:relative;top:10px" /> 1 <img src="./images/down_arrow-removebg-preview.png " style="width:30px;height:30px;position:relative;top:10px"/></div>
        </div></div>
    
    <h2 class="heading" style="margin-top:5px"> Why Graph? </h2>
        <div class = "blank"><div class = "b">
            &nbsp&nbsp&nbsp&nbsp We decide to explore graph-based representations of data for good reason. Graph theory has existed for decades, but advancements in computing power
            and introduction of large-scale graph databases like TigerGraph have allowed applications of graph algorithms to a wide range of domains. Traditional
            data methods, like representing data tabularly, are less effective in representing complex relationships; rows are  observations, columns are  variables.
            This can be limiting for data that has many associated variables and complex relationships, as tabular data is less effective. We believe that
            user-subreddit and user-user relationships would be better represented as graphs, which makes representation more flexible. Especially for Reddit, 
            like many other social media platforms, their comment representation is a tree structure where separate replies to a comment are branches, which is well 
            represented by graphs.
            <div><img src="./images/up_arrow-removebg-preview.png" style="width:30px;height:30px;position:relative;top:10px" /> 2 <img src="./images/down_arrow-removebg-preview.png " style="width:30px;height:30px;position:relative;top:10px"/></div>
        </div></div>
    
    <h2 class="heading" style="margin-top:5px"> Data Preparation </h2>
        <div class = "blank"><div class = "b">
            &nbsp&nbsp&nbsp&nbsp  In order to fully leverage the graph structure of our data, we use <a href="https://www.tigergraph.com/">TigerGraph</a>,
            a graph analytics platform which provides a myriad of tools and resources for graph-based data science
            and machine learning, making it a valuable solution for us. The data we downloaded from pushshift,
            each comment is given in the same format as the following example:<br>
            
            <div style = "padding-left:100px"><p class="center">{<br>
                "author": "RaptorLog",<br>
                "author_flair_css_class": "",<br>
                "author_flair_text": "ro ru ",<br>
                "body": "Oh, I have been going crazy...",<br>
                "can_gild": true,<br>
                "controversiality": 0,<br>
                "created_utc": 1506816002,<br>
                "distinguished": null,<br>
                "edited": false,<br>
                "gilded": 0,<br>
                "id":"dnqik36",<br>
                "is_submitter": true,<br>
                "link_id": "t3_73g6fg",<br>
                "parent_id": "t1_dnqf2cj",<br>
                "permalink": "/r/duolingo/comments/73g6fg/...",<br>
                "retrieved_on": 1509189607,<br>
                "score": 32,<br>
                "stickied": false,<br>
                "subreddit": "duolingo",<br>
                "subreddit_id": "t5_2t6ze"<br>
            }</p><br></div>
            
            &nbsp&nbsp&nbsp&nbsp There is a lot of interesting data here, but we are most interested in the user who made the comment, the subreddit it was posted to and the
            parent comment if any. Due to the fact that any comment on Reddit is either a child of a post of another comment, we can use this parent
            relationship to generate the comment chain graph structure we will set up in TigerGraph. We then use the author field to create edges between
            user vertices identified by those author names and the comment id's as well as subreddit to comment edges using the subreddit name as an identifier
            for the subreddit vertices. Once we have the correct files specifying those vertices and edges, we simply use TigerGraph's tools for uploading and
            mapping the data to generate our graph.<br><br>
            
            After loading our data to TigerGraph, we develop a schema that looks like so: <br>
            <img src="./images/schema.png" /><br>
            This schema consists of two vertex types (Subreddit, User) and 2 edge types (interacted_with, commented_in)<br>
            <div><img src="./images/up_arrow-removebg-preview.png" style="width:30px;height:30px;position:relative;top:10px" /> 3 <img src="./images/down_arrow-removebg-preview.png " style="width:30px;height:30px;position:relative;top:10px"/></div>
        </div></div>
    <h2 class="heading" style="margin-top:5px"> Exploratory Data Analysis </h2>
        <div class = "blank"><div class = "b">
            Once we prepare and load our data, we do some exploratory data analysis to better understand the data we are working with. First, we look into some more
            general statistics like the top 10 largest subreddits with the most unique users:<br>
            <figure>
                <img src="./images/subreddit_unique_users.png">
                <figcaption>Fig 1 - Top 10 subreddits with Unique Users</figcaption>
            </figure><br>
            
            Looking at Figure 1, subreddits that seem more broad and common like 'gaming' and 'pics' are in the top 10 subreddits. 
            Since they are broad, it is more likely that users will join these and be interested in these subreddits. In Figure 2, 
            we look into the distribution of the number of comments made by users:<br>
            <figure>
                <img src="./images/distr_num_comments.png" style="width:100%">
                <figcaption>Fig 2 - Distribution of number of comments made by users</figcaption>
            </figure><br>
            
            
            <div><img src="./images/up_arrow-removebg-preview.png" style="width:30px;height:30px;position:relative;top:10px" /> 4 <img src="./images/down_arrow-removebg-preview.png " style="width:30px;height:30px;position:relative;top:10px"/></div>
        </div></div>
    <h2 class="heading" style="margin-top:5px"> Baselines </h2>
        <div class = "blank"><div class = "b">
            Let us look into some baselines...
            <div><img src="./images/up_arrow-removebg-preview.png" style="width:30px;height:30px;position:relative;top:10px" /> 15 <img src="./images/down_arrow-removebg-preview.png " style="width:30px;height:30px;position:relative;top:10px"/></div>
            <h3 class="heading" style="margin-top:5px"> Non-Graph Algorithms </h3>
            <div class = "blank"><div class = "b">
                This is the Non-Graph Algorithms section.
                <div><img src="./images/up_arrow-removebg-preview.png" style="width:30px;height:30px;position:relative;top:10px" /> 15 <img src="./images/down_arrow-removebg-preview.png " style="width:30px;height:30px;position:relative;top:10px"/></div>
            </div></div>
            <h3 class="heading" style="margin-top:5px"> Centrality Algorithms </h3>
            <div class = "blank"><div class = "b">
                This is the Centrality Algorithms section.
                <div><img src="./images/up_arrow-removebg-preview.png" style="width:30px;height:30px;position:relative;top:10px" /> 15 <img src="./images/down_arrow-removebg-preview.png " style="width:30px;height:30px;position:relative;top:10px"/></div>
            </div></div>
            <h3 class="heading" style="margin-top:5px"> Community Detection Algorithms </h3>
            <div class = "blank"><div class = "b">
                This is the Community Detection Algorithms section.
                <div><img src="./images/up_arrow-removebg-preview.png" style="width:30px;height:30px;position:relative;top:10px" /> 15 <img src="./images/down_arrow-removebg-preview.png " style="width:30px;height:30px;position:relative;top:10px"/></div>
            </div></div>
        </div></div>
    
    <h2 class="heading" style="margin-top:5px"> Final Model </h2>
        <div class = "blank"><div class = "b">
            Here lies our final model...
            <div><img src="./images/up_arrow-removebg-preview.png" style="width:30px;height:30px;position:relative;top:10px" /> 15 <img src="./images/down_arrow-removebg-preview.png " style="width:30px;height:30px;position:relative;top:10px"/></div>
        </div></div>
    
    <h2 class="heading" style="margin-top:5px"> Results & Evaluation </h2>
        <div class = "blank"><div class = "b">
            Here lies our results...
            <div><img src="./images/up_arrow-removebg-preview.png" style="width:30px;height:30px;position:relative;top:10px" /> 15 <img src="./images/down_arrow-removebg-preview.png " style="width:30px;height:30px;position:relative;top:10px"/></div>
        </div></div>
    
    <h2 class="heading" style="margin-top:5px"> Conclusion </h2>
        <div class = "blank"><div class = "b">
            Here lies our conclusion...
            <div><img src="./images/up_arrow-removebg-preview.png" style="width:30px;height:30px;position:relative;top:10px" /> 15 <img src="./images/down_arrow-removebg-preview.png " style="width:30px;height:30px;position:relative;top:10px"/></div>
            <h3 class="heading" style="margin-top:5px"> Future Work/Next Steps </h3>
            <div class = "blank"><div class = "b">
                This is the Future Work/Next Steps section.
                <div><img src="./images/up_arrow-removebg-preview.png" style="width:30px;height:30px;position:relative;top:10px" /> 15 <img src="./images/down_arrow-removebg-preview.png " style="width:30px;height:30px;position:relative;top:10px"/></div>
            </div></div>
        </div></div>
    <div>&nbsp;</div>
</div>

<!-- <div style="background-color:white;border-radius: 10px;padding-left:10px;color:black">
    <h2 style="color:#ff4500"> Baselines </h2>
    <h3 style="color:#ff4500"> Non-Graph Algorithms </h3>
        Sample Text
    <h3 style="color:#ff4500"> Centrality Algorithms </h3>
        Sample Text
    <h3 style="color:#ff4500"> Community Detection Algorithms </h3>
        Sample Text
    <h3 style="color:#ff4500"> Network Statistics K-Means Model </h3>
        Sample Text
</div> -->

<!-- <div style="background-color:white;border-radius: 10px;padding-left:10px;color:black">
    <h2 style="color:#ff4500"> Final Model </h2>
        Sample Text
</div>

<div style="background-color:white;border-radius: 10px;padding-left:10px;color:black">
    <h2 style="color:#ff4500"> Results & Evaluation </h2>
        Sample Text
</div>

<div style="background-color:white;border-radius: 10px;padding-left:10px;color:black">
    <h2 style="color:#ff4500"> Conclusion </h2>
        Sample Text
    <h2 style="color:#ff4500"> Future Work & Next Steps </h2>
        Sample Text
</div> -->

